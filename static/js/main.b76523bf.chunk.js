(this.webpackJsonpconverter=this.webpackJsonpconverter||[]).push([[0],{44:function(e,n,c){},45:function(e,n,c){},69:function(e,n,c){},71:function(e,n,c){},72:function(e,n,c){},73:function(e,n,c){},75:function(e,n,c){"use strict";c.r(n);var r,t=c(0),i=c.n(t),a=c(18),u=c.n(a),o=(c(44),c(45),c(4)),s=c(24),d=c.n(s),l=c(37),C=c(38),j=c.n(C).a.create({baseURL:"https://www.cbr-xml-daily.ru/daily_json.js"});!function(e){e.SET_CURRENCIES="SET_CURRENCIES",e.SET_CURRENT_CURRENCY="SET_CURRENT_CURRENCY",e.CHANGE_FIELD_VALUE="SET_FIELD_VALUE",e.SET_LOADING="SET_LOADING",e.SET_POPUP_CURRENCY="SET_FIRST_POPUP_CURRENCY",e.SET_MAIN_CURRENCY="SET_MAIN_CURRENCY"}(r||(r={}));var h=function(e,n){return{type:r.CHANGE_FIELD_VALUE,payload:{amountFirstField:e,amountSecondField:n}}},b=function(e){return{type:r.SET_LOADING,payload:e}},O=function(e,n){return{type:r.SET_POPUP_CURRENCY,payload:{firstPopupCurrency:e,secondPopupCurrency:n}}},f=function(e){return{type:r.SET_MAIN_CURRENCY,payload:e}},p=c(11),v=(c(69),c(1)),m=function(e){var n=e.changePopupCurrency,c=e.width,r=e.popupRef,t=Object(o.c)((function(e){return e.converter})).currencies;return c<990?Object(v.jsx)("select",{onChange:function(e){return n(e.currentTarget.value)},className:"currenciesList-select",children:t.map((function(e){return"GBP"===e.CharCode?Object(v.jsx)("option",{value:e.CharCode,children:e.Name.slice(0,15)},"".concat(e.Name," ").concat(e.ID)):Object(v.jsx)("option",{value:e.CharCode,children:e.Name},"".concat(e.Name," ").concat(e.ID))}))}):Object(v.jsx)("div",{ref:r,className:"currenciesList",children:t.map((function(e){return"GBP"===e.CharCode?Object(v.jsxs)("div",{onClick:function(){return n(e.CharCode)},className:"currenciesList-item",children:[Object(v.jsx)("span",{children:e.Name.slice(0,15)}),Object(v.jsx)("span",{children:e.CharCode})]},"".concat(e.Name," ").concat(e.ID)):Object(v.jsxs)("div",{onClick:function(){return n(e.CharCode)},className:"currenciesList-item",children:[Object(v.jsx)("span",{children:e.Name}),Object(v.jsx)("span",{children:e.CharCode})]},"".concat(e.Name," ").concat(e.ID))}))})},y=function(){var e=Object(t.useState)([0,0]),n=Object(p.a)(e,2),c=n[0],r=n[1];return Object(t.useLayoutEffect)((function(){function e(){r([window.innerWidth,window.innerHeight])}return window.addEventListener("resize",e),e(),function(){return window.removeEventListener("resize",e)}}),[]),c},N=(c(71),i.a.memo((function(e){var n=e.popupCurrency,c=e.changeCurrency,r=e.currentCurrency,t=e.onChangeVisible,i=e.width,a=e.toggle,u=e.changePopupCurrency,s=Object(o.c)((function(e){return e.converter})).mainCurrencies,d="currencies-block toggle ".concat(a?"active":"");return Object(v.jsx)("div",{className:"currencies",children:Object(v.jsxs)("ul",{children:[s.map((function(e){var n="currencies-block ".concat(r===e.CharCode?"active":"");return Object(v.jsx)("li",{onClick:function(){return c(e.CharCode)},className:n,children:e.CharCode},"".concat(e.ID," ").concat(e.CharCode))})),Object(v.jsx)("li",{className:"currencies-block ".concat(r===n.CharCode?"active":""),onClick:function(){return c(n.CharCode)},children:n.CharCode}),i>990?Object(v.jsx)("li",{className:d,onClick:function(){return t()},children:Object(v.jsx)("svg",{className:a?"rotated":"",width:"13",height:"10",viewBox:"0 0 10 6",fill:"black",xmlns:"http://www.w3.org/2000/svg",children:Object(v.jsx)("path",{d:"M10 5C10 5.16927 9.93815 5.31576 9.81445 5.43945C9.69075 5.56315 9.54427 5.625 9.375 5.625H0.625C0.455729 5.625 0.309245 5.56315 0.185547 5.43945C0.061849 5.31576 0 5.16927 0 5C0 4.83073 0.061849 4.68424 0.185547 4.56055L4.56055 0.185547C4.68424 0.061849 4.83073 0 5 0C5.16927 0 5.31576 0.061849 5.43945 0.185547L9.81445 4.56055C9.93815 4.68424 10 4.83073 10 5Z",fill:"#2C2C2C"})})}):Object(v.jsxs)("li",{className:d,children:[Object(v.jsx)("svg",{width:"13",height:"10",viewBox:"0 0 10 6",fill:"black",xmlns:"http://www.w3.org/2000/svg",children:Object(v.jsx)("path",{d:"M10 5C10 5.16927 9.93815 5.31576 9.81445 5.43945C9.69075 5.56315 9.54427 5.625 9.375 5.625H0.625C0.455729 5.625 0.309245 5.56315 0.185547 5.43945C0.061849 5.31576 0 5.16927 0 5C0 4.83073 0.061849 4.68424 0.185547 4.56055L4.56055 0.185547C4.68424 0.061849 4.83073 0 5 0C5.16927 0 5.31576 0.061849 5.43945 0.185547L9.81445 4.56055C9.93815 4.68424 10 4.83073 10 5Z",fill:"#2C2C2C"})}),Object(v.jsx)(m,{width:i,changePopupCurrency:u})]})]})})}))),x=function(e){var n=e.count,c=e.onChangeFieldValue,r=e.changePopupCurrency,t=e.width,i=e.toggle,a=e.changeCurrency,u=e.currentCurrency,o=e.onChangeVisible,s=e.popupCurrency;return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(N,{width:t,changePopupCurrency:r,toggle:i,popupCurrency:s,changeCurrency:a,currentCurrency:u,onChangeVisible:function(){return o()}}),Object(v.jsx)("input",{type:"number",value:n,onChange:function(e){var n=e.currentTarget.value;c(n)}})]})},R=function(e){var n=e.changeFirstFieldValue,c=e.changeSecondFieldValue,r=e.changeCurrency,i=e.rateFirstCurrency,a=e.rateSecondCurrency,u=Object(o.c)((function(e){return e.converter})),s=u.firstPopupCurrency,d=u.secondPopupCurrency,l=u.currencyFirstField,C=u.currencySecondField,j=u.countFirstField,h=u.countSecondField,b=Object(o.b)(),f=Object(t.useState)({list:null}),N=Object(p.a)(f,2),R=N[0],g=N[1],E=y(),F=Object(p.a)(E,1)[0],S=Object(t.useRef)();Object(t.useEffect)((function(){return R.list&&F>990&&document.body.addEventListener("click",_),function(){document.body.removeEventListener("click",_)}}),[R,F]);var U=function(e){g({list:e})},_=function(e){e.path.includes(S.current)||g({list:null})},P=function(e){r(e,C,j)},w=function(e){r(l,e,j)},L=function(e){U(null),"USD"!==e&&"EUR"!==e&&"RUR"!==e&&"JPY"!==e&&b(O(e,d.CharCode)),P(e)},V=function(e){U(null),"USD"!==e&&"EUR"!==e&&"RUR"!==e&&"JPY"!==e&&b(O(s.CharCode,e)),w(e)},T=i.toFixed(4),I=a.toFixed(4),D="first"===R.list,k="second"===R.list;return Object(v.jsxs)("div",{className:"main",children:[Object(v.jsx)("h1",{children:"Currency converter"}),Object(v.jsxs)("div",{className:"converterBlock",children:[Object(v.jsxs)("div",{className:"converterField",children:[Object(v.jsx)("span",{children:"You give "}),Object(v.jsx)(x,{width:F,changePopupCurrency:L,toggle:D,popupCurrency:s,count:j,changeCurrency:P,onChangeVisible:function(){return U("first")},onChangeFieldValue:n,currentCurrency:l}),Object(v.jsxs)("span",{children:["1 ",l," = ",T," ",C]})]}),Object(v.jsx)("button",{className:"active",onClick:function(){return r(C,l,j),void b(O(d.CharCode,s.CharCode))},children:"Swap"}),Object(v.jsxs)("div",{className:"converterField",children:[Object(v.jsx)("span",{children:"You get "}),Object(v.jsx)(x,{width:F,toggle:k,popupCurrency:d,count:h,changeCurrency:w,onChangeVisible:function(){return U("second")},onChangeFieldValue:c,currentCurrency:C,changePopupCurrency:V}),Object(v.jsxs)("span",{children:["1 ",C," = ",I," ",l]})]})]}),R.list&&F>990&&Object(v.jsx)(m,{popupRef:S,width:F,changePopupCurrency:"first"===R.list?L:V})]})},g=function(){var e=Object(o.b)(),n=Object(o.c)((function(e){return e.converter})),c=n.currencies,t=n.currencyFirstField,i=n.currencySecondField,a=c.find((function(e){return e.CharCode===t})),u=c.find((function(e){return e.CharCode===i})),s=a.Value/u.Value,d=u.Value/a.Value;"RUR"===t&&(s=1/u.Value,d=u.Value),"RUR"===i&&(s=a.Value,d=1/a.Value),"RUR"===a.CharCode&&"RUR"===u.CharCode&&(s=1,d=1);var l=function(n){e(h(n,""===n?n:(+n*s).toFixed(2)))};return Object(v.jsx)(R,{rateSecondCurrency:d,rateFirstCurrency:s,changeCurrency:function(n,t,i){var o,d;a=c.find((function(e){return e.CharCode===n})),u=c.find((function(e){return e.CharCode===t})),s=a.Value/u.Value,"RUR"===a.CharCode&&(s=1/u.Value),"RUR"===u.CharCode&&(s=a.Value),"RUR"===a.CharCode&&"RUR"===u.CharCode&&(s=1),e((o=n,d=t,{type:r.SET_CURRENT_CURRENCY,payload:{currencyOfFirstField:o,currencyOfSecondField:d}})),l(i)},changeFirstFieldValue:l,currencies:c,changeSecondFieldValue:function(n){e(h(""===n?n:(+n/s).toFixed(2),n))}})},E=c(3),F=(c(72),function(){var e=Object(o.c)((function(e){return e.converter})).currenciesForList,n=y(),c=Object(p.a)(n,1)[0];return Object(v.jsxs)("div",{className:"ListOfCurrenciesBlock",children:[Object(v.jsx)("h1",{children:"List of currencies"}),Object(v.jsxs)("div",{className:"ListOfCurrencies",children:[Object(v.jsxs)("div",{className:"ListOfCurrencies-description",children:[Object(v.jsx)("div",{children:"Code"}),Object(v.jsx)("div",{children:"Nominal"}),c>700?Object(v.jsx)("div",{className:"ListOfCurrencies-description__name",children:"Name"}):null,Object(v.jsx)("div",{children:"Rate"}),Object(v.jsx)("div",{children:"Changes"})]}),e.map((function(e){var n=e.Value-e.Previous,r="".concat(n>0?"up":"down");return Object(v.jsxs)("div",{className:"ListOfCurrencies-item",children:[Object(v.jsx)("div",{children:e.CharCode}),Object(v.jsx)("div",{children:e.Nominal}),c>700?Object(v.jsx)("div",{className:"ListOfCurrencies-item__name",children:"GBP"===e.CharCode?e.Name.slice(0,15):e.Name}):null,Object(v.jsx)("div",{children:e.Value}),Object(v.jsx)("div",{className:r,children:n.toFixed(3)})]},e.ID)}))]})]})}),S=c(13),U=(c(73),function(){return Object(v.jsx)("div",{className:"headerBlock",children:Object(v.jsxs)("div",{children:[Object(v.jsx)(S.b,{to:"/list",children:"LIST"}),Object(v.jsx)(S.b,{to:"/",children:"CONVERTER"})]})})});var _=function(){var e=Object(o.c)((function(e){return e.converter})).loading,n=Object(o.b)();return Object(t.useEffect)((function(){n(function(){var e=Object(l.a)(d.a.mark((function e(n){var c,t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(b(!0)),e.next=3,j.get("").then((function(e){return e.data}));case 3:c=e.sent,t=c.Valute,n((i=Object.values(t),{type:r.SET_CURRENCIES,payload:i})),n(f([t.USD,t.EUR,t.JPY])),n(O(t.CHF.CharCode,t.CHF.CharCode)),n(b(!1));case 9:case"end":return e.stop()}var i}),e)})));return function(n){return e.apply(this,arguments)}}())}),[n]),e?null:Object(v.jsxs)("div",{className:"App",children:[Object(v.jsx)(U,{}),Object(v.jsxs)(E.c,{children:[Object(v.jsx)(E.a,{exact:!0,path:"/",render:function(){return Object(v.jsx)(g,{})}}),Object(v.jsx)(E.a,{path:"/list",render:function(){return Object(v.jsx)(F,{})}})]})]})},P=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,76)).then((function(n){var c=n.getCLS,r=n.getFID,t=n.getFCP,i=n.getLCP,a=n.getTTFB;c(e),r(e),t(e),i(e),a(e)}))},w=c(14),L=c(39),V=c(17),T=c(5),I={loading:!0,currenciesForList:[],currencies:[{CharCode:"RUR",Value:0,Previous:0,ID:"1423hgdfg5",Name:"\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0439 \u0440\u0443\u0431\u043b\u044c",Nominal:1,NumCode:""}],mainCurrencies:[{CharCode:"RUR",Value:0,Previous:0,ID:"1423hgdfg5",Name:"\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0439 \u0440\u0443\u0431\u043b\u044c",Nominal:1,NumCode:""}],countFirstField:"",countSecondField:"",currencyFirstField:"RUR",currencySecondField:"USD",firstPopupCurrency:{},secondPopupCurrency:{}},D=Object(w.c)({converter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case r.SET_CURRENCIES:var c=n.payload.filter((function(e){return"XDR"!==e.CharCode&&"TJS"!==e.CharCode})).sort((function(e,n){return e.Name<n.Name?-1:e.Name>n.Name?1:0}));return Object(T.a)(Object(T.a)({},e),{},{currencies:[].concat(Object(V.a)(e.currencies),Object(V.a)(c.map((function(e){return e.Nominal>1?Object(T.a)(Object(T.a)({},e),{},{Value:e.Value/e.Nominal,Nominal:1}):e})))),currenciesForList:c});case r.SET_CURRENT_CURRENCY:return Object(T.a)(Object(T.a)({},e),{},{currencyFirstField:n.payload.currencyOfFirstField,currencySecondField:n.payload.currencyOfSecondField});case r.CHANGE_FIELD_VALUE:return Object(T.a)(Object(T.a)({},e),{},{countFirstField:n.payload.amountFirstField,countSecondField:n.payload.amountSecondField});case r.SET_LOADING:return Object(T.a)(Object(T.a)({},e),{},{loading:n.payload});case r.SET_POPUP_CURRENCY:return Object(T.a)(Object(T.a)({},e),{},{firstPopupCurrency:e.currencies.find((function(e){return e.CharCode===n.payload.firstPopupCurrency})),secondPopupCurrency:e.currencies.find((function(e){return e.CharCode===n.payload.secondPopupCurrency}))});case r.SET_MAIN_CURRENCY:return Object(T.a)(Object(T.a)({},e),{},{mainCurrencies:[].concat(Object(V.a)(e.mainCurrencies),Object(V.a)(n.payload))});default:return e}}}),k=Object(w.d)(D,Object(w.a)(L.a));window.store=k,u.a.render(Object(v.jsx)(o.a,{store:k,children:Object(v.jsx)(S.a,{children:Object(v.jsx)(_,{})})}),document.getElementById("root")),P()}},[[75,1,2]]]);
//# sourceMappingURL=main.b76523bf.chunk.js.map